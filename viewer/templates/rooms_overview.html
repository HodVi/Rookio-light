{% extends 'base.html' %}
{% load tz %}

{% block title %}Rookio - Rooms Overview{% endblock title %}

{% block content %}

<div class="container mx-auto px-4">
    <h2 class="text-2xl font-bold mb-4">Rooms:</h2>
    <ul>
        {% for room in rooms %}
        <li class="mb-4 border rounded p-4 border-red-900">
            <h3 class="text-xl font-bold">{{ room.name }}</h3>

{#            <p class="mt-2"><span class="font-bold">Tags:</span>#}
                {% for tag in room.tags.all %}
                    {{ tag.name }}{% if not forloop.last %} â€§ {% endif %}
                {% empty %}
                    No tags.
                {% endfor %}
{#            </p>#}

            <h4 class="text-lg mt-2">Owners:</h4>
            <ul class="list-disc list-inside">
                {% for owner in room.owners.all %}
                <li class="mt-1 text-purple-900">
                    {% if owner.user_person_owner.first_name and owner.user_person_owner.last_name %}
                        {{ owner.user_person_owner.first_name }} {{ owner.user_person_owner.last_name }}
                    {% else %}
                        {{ owner.user_person_owner.username }}
                    {% endif %}
                    - {{ owner.get_permission_display }}
                </li>
                {% endfor %}
            </ul>
            <p class="mt-2"><span class="font-bold">Type:</span> {{ room.get_room_type_display }}</p>
            <p class="mt-2"><span class="font-bold">Description:</span> {{ room.description }}</p>
            <p class="mt-2"><span class="font-bold">Place:</span> {{ room.place }}</p>
            <p class="mt-2"><span class="font-bold">GPS place description:</span> {{ room.gps_description }}</p>
            <p class="mt-2"><span class="font-bold">GPS latitude of place:</span> {{ room.gps_lat }}</p>
            <p class="mt-2"><span class="font-bold">GPS longitude of place:</span> {{ room.gps_lng }}</p>
            <p class="mt-2"><span class="font-bold">Date:</span> {{ room.date|date:'d.m.Y' }} </p>
{#            TODO - fix timezone#}
            <p class="mt-2"><span class="font-bold">Time:</span> {{ room.time|time:'H:i' }} {{ room.time|timezone:'Europe/Bratislava' }}</p>
            <p class="mt-2"><span class="font-bold">Contact:</span> {{ room.contact_public }}</p>
{#            TODO - Additional Contact -> make it visible only for event attendants#}
            <p class="mt-2"><span class="font-bold">Additional Contact:</span> {{ room.contact_after_assignment }}</p>
            <p class="mt-2"><span class="font-bold">Age restriction:</span> {{ room.age_restriction }}</p>
            <p class="mt-2"><span class="font-bold">Age recommendation:</span> {{ room.age_recommendation }}</p>
            <p class="mt-2"><span class="font-bold">Number of available places:</span> {{ number_of_available_places }}</p>
{#            TODO - make it visible only if Room type is event#}
            <p class="mt-2"><span class="font-bold">Minimum number of people to start the event:</span> {{ room.minimum_participants }}</p>
            <p class="mt-2">Todo :</p>
        </li>
        {% empty %}
        <li class="text-red-500">No rooms available.</li>
        {% endfor %}
    </ul>
</div>

{% endblock %}